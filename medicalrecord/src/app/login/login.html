<div class="login-container">

  <!-- Déjà connecté -->
  <div *ngIf="isLoggedIn; else loginForm">
    <h2>Vous êtes déjà connecté</h2>

    <p>
      Connecté en tant que :
      <strong>{{ firstname }} {{ lastname }}</strong>
      <span>
        ({{ userType === 'practitioner' ? 'praticien' : 'patient' }})
      </span>
    </p>

    <p>
      ID : <strong>{{ userId }}</strong>
    </p>

    <button (click)="logout()">Déconnexion</button>
  </div>

  <!-- Formulaire -->
  <ng-template #loginForm>
    <h2>Connexion</h2>

    <form (ngSubmit)="submit()">

      <label>Email</label>
      <input type="email" [(ngModel)]="credentials.email" name="email" required>

      <label>Mot de passe</label>
      <input type="password" [(ngModel)]="credentials.password" name="password" required>

      <button type="submit" [disabled]="isSubmitting">
        {{ isSubmitting ? 'Connexion…' : 'Se connecter' }}
      </button>

      <p *ngIf="error" class="error-message">{{ error }}</p>
    </form>
  </ng-template>

</div>

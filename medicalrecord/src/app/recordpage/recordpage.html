<div class="record-page-container">
    <h1>Dossier Médical</h1>
    <div class="section">
      <h2>Informations Générales</h2>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Poids :</span>
          <span class="value">{{ record[0].weight ? record[0].weight + ' kg' : 'Non renseigné' }}</span>
        </div>
        <div class="info-item">
          <span class="label">Taille :</span>
          <span class="value">{{ record[0].height ? record[0].height + ' cm' : 'Non renseigné' }}</span>
        </div>
        @if(record[0].weight && record[0].height){
        <div class="info-item">
          <span class="label">IMC :</span>
          <span class="value">
            {{ calculateBMI(record[0]) }}
            <span class="bmi-category">({{ getBMICategory(record[0]) }})</span>
          </span>
        </div>
        }
        <div class="info-item">
          <span class="label">Groupe sanguin :</span>
          <span class="value blood-group">{{ record[0].blood_group }}</span>
        </div>
        <div class="info-item">
          <span class="label">Pression sanguine :</span>
          <span class="value">{{ record[0].blood_pressure }}</span>
        </div>
      </div>
    </div>

    <!-- ALLERGIES -->
    <div class="section">
      <h2>Allergies</h2>
      @if(record[0].allergies && record[0].allergies.length > 0){
      <div class="allergies-list">
        @for(allergy of record[0].allergies; track allergy){
        <span>{{ allergy }}</span>
          }
      </div>
        @if(!record[0].allergies || record[0].allergies.length === 0){
        <p>Aucune allergie renseignée</p>
      }
      }
    </div>
    <!-- VACCINS -->
    <div class="section">
      <h2>Historique de Vaccination</h2>
      @if(record[0].vaccines && record[0].vaccines.length > 0){
      <div class="vaccines-list">
        @for(vaccine of record[0].vaccines; track vaccine.name; let i = $index){
        <div class="vaccine-card">
          <div class="vaccine-header">
            <h3>{{ vaccine.name }}</h3>
            <span class="vaccine-number">#{{ i + 1 }}</span>
          </div>
          <div class="vaccine-details">
            @if(vaccine.injection_date){
            <div>
              <span class="detail-label">Date :</span>
              <span class="detail-value">{{ formatDate(vaccine.injection_date) }}</span>
            </div>
            }
            @if(vaccine.vaccination_type){
            <div>
              <span class="detail-label">Type :</span>
              <span class="detail-value">{{ vaccine.vaccination_type }}</span>
            </div>
            }
            @if(vaccine.vaccinator_name){
            <div>
              <span class="detail-label">Vaccinateur :</span>
              <span class="detail-value">{{ vaccine.vaccinator_name }}</span>
            </div>
            }
          </div>
        </div>
        }
      </div>
      }
      @if(!record[0].vaccines || record[0].vaccines.length === 0){
      <p>Aucun vaccin enregistré</p>
      }
    </div>

    <!-- FOOTER ACTIONS -->
    <div class="footer-actions">
      <button class="btn-back" (click)="goBack()">⟵ Retour</button>
      <button class="btn-back" (click)="editRecord(this.recordId)">Modifier</button>
      <button class="btn-delete" (click)="deleteRecord()">Supprimer</button>
    </div>

</div>
